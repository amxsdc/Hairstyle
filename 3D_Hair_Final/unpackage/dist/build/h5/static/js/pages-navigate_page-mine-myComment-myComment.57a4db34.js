(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-navigate_page-mine-myComment-myComment"],{"1eec":function(n,e,t){"use strict";t.r(e);var i=t("51a0"),a=t.n(i);for(var s in i)"default"!==s&&function(n){t.d(e,n,(function(){return i[n]}))}(s);e["default"]=a.a},"29a0":function(n,e,t){var i=t("4c21");"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var a=t("4f06").default;a("1fdd8d95",i,!0,{sourceMap:!1,shadowMode:!1})},"3f73":function(n,e,t){"use strict";t.r(e);var i=t("4be7"),a=t("1eec");for(var s in a)"default"!==s&&function(n){t.d(e,n,(function(){return a[n]}))}(s);t("d46c");var o,c=t("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"7069ed91",null,!1,i["a"],o);e["default"]=r.exports},"4be7":function(n,e,t){"use strict";var i={uButton:t("b655").default,uLineProgress:t("4b6e").default,uCheckbox:t("cc82").default},a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"title"},[t("v-uni-text",{staticClass:"txttitle"},[n._v("我的评论")]),t("u-button",{staticClass:"deletebutton",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.buttonDelete.apply(void 0,arguments)}}},[n._v("删除")])],1),t("v-uni-view",{staticClass:"list"},n._l(n.list,(function(e,i){return t("v-uni-view",{key:i,staticClass:"cell",attrs:{"hover-class":"hover"}},[t("v-uni-view",{staticClass:"element"},[t("v-uni-image",{staticClass:"icon",attrs:{src:"/static/mine1.png",id:i},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.userinfoClick.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"fatherVessel"},[t("v-uni-view",{staticClass:"topBar",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.passageDetail(i)}}},[t("v-uni-text",[n._v("文章标题:"+n._s(e.split(" ")[0]))]),t("v-uni-text",{staticClass:"likes"},[n._v("|点赞数:"+n._s(n.likes))])],1),i!=n.currentIndex?t("v-uni-view",{staticClass:"audioSetting"},[t("v-uni-image",{staticClass:"playIcon",attrs:{src:"/static/play.png",id:i},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.playAudio.apply(void 0,arguments)}}}),t("v-uni-text",{staticClass:"processorText",attrs:{id:i}},[n._v("00:00/00:00")]),t("u-line-progress",{staticClass:"processorBar",attrs:{height:n.processorHeight,striped:!0,percent:n.zero,"show-percent":!1,"striped-active":!0,id:i}})],1):n._e(),i==n.currentIndex?t("v-uni-view",{staticClass:"audioSetting"},[t("v-uni-image",{staticClass:"playIcon",attrs:{src:"/static/pause.png",id:i},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.playAudio.apply(void 0,arguments)}}}),t("v-uni-text",{staticClass:"processorText",attrs:{id:i}},[n._v(n._s(n.currentPlayTime)+":00/"+n._s(n.duration)+":00")]),t("u-line-progress",{staticClass:"processorBar",attrs:{height:n.processorHeight,striped:!0,percent:n.playPercent,"show-percent":!1,"striped-active":!0,id:i}})],1):n._e(),t("v-uni-view",{staticClass:"editBar"},[t("v-uni-text",{staticClass:"commentTime"},[n._v("评论时间:"+n._s(e.split(" ")[1].split('"')[1])+" "+n._s(e.split(" ")[2].split('"')[0]))]),t("v-uni-text",{staticClass:"editComment",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.editCommentClick(i)}}},[n._v("|编辑评论|")]),i!=n.currentCheckBoxIndex?t("v-uni-view",{staticClass:"checkboxes"},[t("u-checkbox",{staticClass:"checkbox",attrs:{size:"12px","icon-size":"12px","label-size":"12px",disabled:!1,"v-show":n.showCheckboxes,name:i},on:{change:function(e){arguments[0]=e=n.$handleEvent(e),n.checkboxChange.apply(void 0,arguments)}},model:{value:n.checked[i],callback:function(e){n.$set(n.checked,i,e)},expression:"checked[index]"}},[n._v("删除评论")])],1):n._e(),i==n.currentCheckBoxIndex?t("v-uni-view",{staticClass:"checkboxes"}):n._e()],1)],1)],1)],1)})),1)],1)},s=[];t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return s})),t.d(e,"a",(function(){return i}))},"4c21":function(n,e,t){var i=t("24fb");e=i(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*列表外框-元素 */.element[data-v-7069ed91]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%;height:60px;padding-left:10px;margin:4px;border-radius:4px;font-size:12px;-moz-box-shadow:inset 0 0 10px #ccc;-webkit-box-shadow:inset 0 0 10px #ccc;box-shadow:inset 0 0 10px #ccc}\n/*删除复选库框 */.checkboxes[data-v-7069ed91]{width:105px;height:16px;padding-left:5px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}\n/*一个列元素 */.cell[data-v-7069ed91]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;display:-webkit-box;display:-webkit-flex;display:flex}\n/*头像 */.icon[data-v-7069ed91]{width:20px;height:20px;margin-right:4px;border-radius:3px;-moz-box-shadow:0 0 1px 1px #06c;-webkit-box-shadow:0 0 1px 1px #06c;box-shadow:0 0 1px 1px #06c}\n/*删除按钮 */.deletebutton[data-v-7069ed91]{width:30px;height:23px;margin-right:4px;background-color:#f50;font-size:12px}\n/*音频播放 */.audioSetting[data-v-7069ed91]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;display:-webkit-box;display:-webkit-flex;display:flex}\n/*play图标 */.playIcon[data-v-7069ed91]{width:20px;height:20px}\n/*进度条 */.processorBar[data-v-7069ed91]{margin-left:4px;width:65%}\n/*列表栏的父容器 */.fatherVessel[data-v-7069ed91]{font-size:12px;width:100%;height:100%}\n/*第三栏即编辑评论栏 */.editBar[data-v-7069ed91]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;display:-webkit-box;display:-webkit-flex;display:flex}\n/*顶栏显示栏 */.topBar[data-v-7069ed91]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;display:-webkit-box;display:-webkit-flex;display:flex}\n/*点赞数 */.likes[data-v-7069ed91]{color:#2b85e4;margin-left:5px}\n/*模块标题 */.title[data-v-7069ed91]{width:100%;height:50px;padding-left:20px;font-size:14px;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:4px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-align-content:center;align-content:center;background-color:#2979ff}\n/*编辑评论 */.editComment[data-v-7069ed91]{font-size:12px;color:#2b85e4;margin-left:4px}\n/*评论时间 */.commentTime[data-v-7069ed91]{font-size:12px}",""]),n.exports=e},"51a0":function(n,e,t){"use strict";t("a434"),t("e25e"),t("ac1f"),t("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=uni.createInnerAudioContext(),a={data:function(){return{likes:12,currentCheckBoxIndex:-1,processorHeight:"5px",currentPlayTime:"00:00",checked:[],zero:0,currentIndex:-1,duration:0,userName:"",list:[],content:"",playStatus:!1,playORnot:!0,playPercent:0,audioSrc:"",showCheckboxes:!0}},onShow:function(){var n=this;uni.getStorage({key:"userInfo",success:function(e){n.userName=e.data.name}});for(var e=n.list.length,t=0;t<e;t++)n.list.splice(0,1),n.checked.splice(0,1);uni.request({url:"/api/getMyComment",method:"POST",data:{userName:n.userName},success:function(e){if(0!=e.data.data[0].status)for(var t=e.data.data,i=0;i<t.length;i++)n.list.push(t[i].postTitle+" "+t[i].cmTime+" "+t[i].cmAudio+" "+t[i].cmID+" "+t[i].postID),n.checked.push(!1);else n.$u.toast("当前无评论")}})},methods:{userinfoClick:function(n){var e=this;uni.navigateTo({url:"../mySettings/basicInfo/basicInfo?userName="+e.userName})},buttonDelete:function(n){for(var e=this,t=!1,i=0;i<e.checked.length;i++)if(e.checked[i]){t=!0;break}t?uni.showModal({title:"确认删除",content:"确认要删除选中评论吗？",success:function(n){if(n.confirm){for(var t=[],i=e.checked.length,a=0,s=0;a<i;a++)e.checked[s]?(t.push(e.list[s].split(" ")[4]),e.list.splice(s,1),e.checked.splice(s,1)):s+=1;uni.request({url:"/api/deleteComment",method:"POST",data:{cmID:t},success:function(n){e.$u.toast("删除成功")},fail:function(n){e.$u.toast("删除失败")}})}else n.cancel&&e.$u.toast("取消删除")}}):e.$u.toast("请选择要删除的评论")},checkboxChange:function(n){var e=n.name;this.checked[e]=!this.checked[e]},editCommentClick:function(n){var e=this;uni.navigateTo({url:"editComment/editComment?ID="+e.list[n].split(" ")[4]})},likesClick:function(){this.$u.toast("当前未安排点赞响应")},playAudio:function(n){var e=this;""!=e.list[n.target.id].split(" ")[3]?(i.src=e.list[n.target.id].split(" ")[3],e.playStatus&&e.currentIndex!=n.target.id&&(e.playStatus=!1,e.currentIndex=-1,e.playORnot=!0,i.stop(),e.playPercent=0),e.playORnot?(e.playStatus=!0,e.currentIndex=n.target.id,e.playORnot=!1,i.play(),i.onCanplay((function(n){e.duration=parseInt(i.duration)})),i.onTimeUpdate((function(n){e.playPercent=i.currentTime/e.duration*100,e.currentPlayTime=parseInt(i.currentTime)})),i.onEnded((function(n){e.playPercent=0,e.currentIndex=-1,e.playORnot=!0}))):(e.play="播放",e.currentIndex=-1,e.playORnot=!0,i.pause(),e.playPercent=0),i.onError((function(n){e.$u.toast("音频播放发生错误,加载失败")}))):e.$u.toast("当前评论无音源")},passageDetail:function(n){uni.navigateTo({url:"../../Home/passageDetails/passageDetails?ID="+_this.list[n].split(" ")[5]+"&currentName="+_this.list[n].split(" ")[1]})}}};e.default=a},d46c:function(n,e,t){"use strict";var i=t("29a0"),a=t.n(i);a.a}}]);